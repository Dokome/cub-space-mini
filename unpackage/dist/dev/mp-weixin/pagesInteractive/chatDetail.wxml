<view data-event-opts="{{[['tap',[['cancle',['$event']]]]]}}" style="background-color:#f3f3f3;" bindtap="__e" class="data-v-ebbd7a48"><navbar vue-id="8bf0ccac-1" title="{{pageTitle}}" class="data-v-ebbd7a48" bind:__l="__l"></navbar><scroll-view class="Anchor data-v-ebbd7a48" style="{{'height:'+('calc(100vh - '+(ViewPart-20)+'px)')+';'}}" scroll-y="true" scroll-top="{{scrollTop}}" upper-threshold="{{pageHeight*2}}" scroll-with-animation="{{!ifLoaddingShow}}" scroll-anchoring="{{true}}" data-event-opts="{{[['scrolltoupper',[['scrolltoupper',['$event']]]]]}}" bindscrolltoupper="__e"><view class="Anchor data-v-ebbd7a48" style="padding-bottom:180rpx;"><view class="padding data-v-ebbd7a48"><block wx:if="{{isCompleted}}"><view class="padding wmax flex data-v-ebbd7a48" style="height:340rpx;"><block wx:if="{{userInfo}}"><view data-event-opts="{{[['tap',[['enterUserHome',['$0'],['userIdTo']]]]]}}" class="{{['\n','','','','','','','','','','','','','','flex-sub\n','','','','','','','','','','','','','','profileCard\n','','','','','','','','','','','','','','flex','flex-direction\n','','','','','','','','','','','','','','justify-between\n','','','','','','','','','','','','','','padding\n','','','','','','','','','','','','','data-v-ebbd7a48',lbgColor]}}" bindtap="__e"><view class="data-v-ebbd7a48"><u-avatar vue-id="8bf0ccac-2" size="{{80}}" src="{{userInfo.avatar||userInfo.avatarUrl}}" class="data-v-ebbd7a48" bind:__l="__l"></u-avatar></view><view class="text-white data-v-ebbd7a48">{{''+(userInfo.nick||userInfo.nickName)+''}}</view><view class="text-white data-v-ebbd7a48">打个招呼吧~</view></view></block></view></block></view><view style="background-color:#f5f5f5;" class="data-v-ebbd7a48"></view><block wx:for="{{msgList}}" wx:for-item="item" wx:for-index="I_index" wx:key="ID"><view class="data-v-ebbd7a48"><block wx:if="{{!item.isRevoked&&!item.isDeleted}}"><view class="{{['isMessage','data-v-ebbd7a48',item.from!==userId?'isNotSelf':'isSelf']}}"><view class="{{['data-v-ebbd7a48',item.from!==userId?'margin-right-sm':'margin-left-sm']}}"><u-avatar vue-id="{{'8bf0ccac-3-'+I_index}}" size="{{80}}" src="{{item.avatar}}" data-event-opts="{{[['^click',[['enterUserHome',['$0'],[[['msgList','ID',item.ID,'from']]]]]]]}}" bind:click="__e" class="data-v-ebbd7a48" bind:__l="__l"></u-avatar></view><view class="messageBlock flex align-center justify-center data-v-ebbd7a48" style="{{'background-color:'+(chatStyle[item.from!==userId?0:1])+';'}}" data-backIndex="{{item.random}}" data-event-opts="{{[['touchstart',[['backTargetChangeStart',['$event']]]],['touchend',[['backTargetChangeEnd',['$event']]]]]}}" bindtouchstart="__e" bindtouchend="__e"><block wx:if="{{item.payload.text}}"><view class="flex align-end data-v-ebbd7a48" style="flex-wrap:wrap;"><block wx:for="{{item.payload.textDom}}" wx:for-item="msg" wx:for-index="m_index" wx:key="m_index"><view data-backIndex="{{item.random}}" class="data-v-ebbd7a48"><block wx:if="{{msg.name==='text'}}"><text class="data-v-ebbd7a48">{{msg.text}}</text></block><block wx:if="{{msg.name==='image'}}"><image style="width:40rpx;height:40rpx;vertical-align:text-bottom;" src="{{msg.src}}" mode="aspectFill" class="data-v-ebbd7a48"></image></block></view></block></view></block><block wx:if="{{item.payload.imageInfoArray}}"><view class="flex align-center justify-center data-v-ebbd7a48"><block wx:if="{{item.payload.imageInfoArray[2]}}"><image style="{{'width:'+(item.payload.imageInfoArray[1].width+'px')+';'+('height:'+(item.payload.imageInfoArray[1].height+'px')+';')+('max-width:'+('400rpx')+';')}}" src="{{item.payload.imageInfoArray[2].url}}" mode="aspectFill" data-backIndex="{{item.random}}" data-event-opts="{{[['tap',[['imgPrview',['$0'],[[['msgList','ID',item.ID,'payload.imageInfoArray.__$n1.url']]]]]]]}}" bindtap="__e" class="data-v-ebbd7a48"></image></block></view></block><block wx:if="{{item.payload.remoteAudioUrl}}"><view class="flex align-center data-v-ebbd7a48" data-backIndex="{{item.random}}" data-event-opts="{{[['tap',[['audioPlayHandle',['$0',I_index,'$event'],[[['msgList','ID',item.ID,'payload.url']]]]]]]}}" bindtap="__e"><view class="blockDance flex align-center data-v-ebbd7a48" style="{{'height:'+('40rpx')+';'}}"><block wx:for="{{4}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['blockDance-item','data-v-ebbd7a48',(I_index===playAudioIndex)?'animateRuning':'']}}" data-backIndex="{{item.random}}"></view></block></view><text class="margin-left-xs data-v-ebbd7a48" data-backIndex="{{item.random}}">{{(item.payload.second||0.5)+'s'}}</text></view></block><block wx:if="{{item.from===userId&&newsBackIndex===item.random}}"><view data-event-opts="{{[['tap',[['newsBackClickHandle',['$0'],[[['msgList','ID',item.ID]]]]]]]}}" class="chatNewsBack padding-xs data-v-ebbd7a48" bindtap="__e">撤回消息</view></block></view></view></block><block wx:if="{{item.isRevoked&&!item.isDeleted}}"><view class="flex justify-center align-center data-v-ebbd7a48"><u-tag vue-id="{{'8bf0ccac-4-'+I_index}}" text="{{(userId===item.from?'你':'对方')+'撤回了一条消息'}}" shape="circle" color="#909399" bg-color="#F5F5F5" border-color="#F5F5F5" data-event-opts="{{[['^click',[['deleteRevokedMsg',['$0'],[[['msgList','ID',item.ID]]]]]]]}}" bind:click="__e" class="data-v-ebbd7a48" bind:__l="__l"></u-tag></view></block></view></block><view style="{{'height:'+(paddingHeight+'px')+';'}}" class="data-v-ebbd7a48"></view></view></scroll-view><block wx:if="{{paddingHeight&&!inputState}}"><scroll-view class="emojiBox bg-white wmax data-v-ebbd7a48" style="height:300px;width:100%;" scroll-y="true"><view class="flex data-v-ebbd7a48" style="flex-wrap:wrap;"><block wx:for="{{$root.l0}}" wx:for-item="emoji" wx:for-index="e_index" wx:key="e_index"><view data-event-opts="{{[['tap',[['emojiSelect',['$0'],[[['emojiName','',e_index]]]]]]]}}" class="emojiItem data-v-ebbd7a48" bindtap="__e"><view class="emojiTtemImg flex align-center justify-center data-v-ebbd7a48"><image style="width:60%;height:60%;" src="{{emoji.m0}}" mode="aspectFill" class="data-v-ebbd7a48"></image></view></view></block></view></scroll-view></block><text-input vue-id="8bf0ccac-5" mode="aboutChat" userIdTo="{{userIdTo}}" keyBoardFlag="{{keyBoardFlag}}" buttonColor="{{chatStyle[0]}}" class="data-v-ebbd7a48" bind:__l="__l"></text-input><block wx:if="{{ifLoaddingShow}}"><loading vue-id="8bf0ccac-6" class="data-v-ebbd7a48" bind:__l="__l"></loading></block></view>