{"version":3,"sources":["uni-app:///pagesHome/identify.js"],"names":["__identify","submit","isComplete","realName","phone","vailid","SID","schoolId","every","item","trim","length","$http","request","url","method","data","studentCode","verificationCode","code","uni","reLaunch","showToast","title","icon","confirm","e","school","label","value","getConfirmStatus","result","confirmStatus","setTimeout","ifLoaddingShow","sendVerificationCode","vaildTimmer","test","setInterval","vaildTimeCount","clearTimeout","getAllSchool","list","map","id","name","schoolList"],"mappings":"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","file":"pagesHome/common/vendor.js","sourcesContent":["export const __identify = {\r\n\t// 提交\r\n\tasync submit() {\r\n\t\tlet isComplete = [this.realName, this.phone, this.vailid, this.SID, this.schoolId].every(item => {\r\n\t\t\tif (item.trim().length === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tif (isComplete) {\r\n\t\t\tconst data = await this.$http.request({\r\n\t\t\t\turl: '/umsConfirm/pushConfirm',\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\t\tschoolId: this.schoolId,\r\n\t\t\t\t\t\trealName: this.realName,\r\n\t\t\t\t\t\tstudentCode: this.SID,\r\n\t\t\t\t\t\tphone: this.phone,\r\n\t\t\t\t\t\tverificationCode: this.vailid\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (data.data.code === 200) {\r\n\t\t\t\treturn uni.reLaunch({\r\n\t\t\t\t\turl: '/pages/home/home'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn uni.showToast({\r\n\t\t\t\ttitle: '请完善所有信息',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\t// 学校更改\r\n\tconfirm(e) {\r\n\t\tthis.school = e[0].label;\r\n\t\tthis.schoolId = e[0].value;\r\n\t},\r\n\t// 获取认证状态\r\n\tasync getConfirmStatus() {\r\n\t\tconst data = await this.$http.request({\r\n\t\t\turl: '/umsAccount/getUserInfo',\r\n\t\t\tmethod: 'GET'\r\n\t\t});\r\n\t\tconst result = data.data.data;\r\n\t\tthis.confirmStatus = result.confirmStatus;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.ifLoaddingShow = false;\r\n\t\t}, 500);\r\n\t},\r\n\t// 发送验证码\r\n\tasync sendVerificationCode() {\r\n\t\tif (this.vaildTimmer) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 验证规则\r\n\t\tif (!(/^[1][3,4,5,7,8,9][0-9]{9}$/.test(this.phone))){ \r\n\t\t  return uni.showToast({\r\n\t\t  \ttitle: '请填写正确的手机号',\r\n\t\t\t\ticon: 'none'\r\n\t\t  }); \r\n\t\t} \r\n\t\t// 发送请求\r\n\t\tconst data = await this.$http.request({\r\n\t\t\turl: '/umsConfirm/sendVerificationCode',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tphone: this.phone\r\n\t\t\t}\r\n\t\t});\r\n\t\t// 请求CD\r\n\t\tthis.vaildTimmer = setInterval(() => {\r\n\t\t\tif (this.vaildTimeCount <= 1) {\r\n\t\t\t\tclearTimeout(this.vaildTimmer);\r\n\t\t\t\tthis.vaildTimmer = null;\r\n\t\t\t\tthis.vaildTimeCount = 120;\r\n\t\t\t}\r\n\t\t\tthis.vaildTimeCount--;\r\n\t\t}, 1000);\r\n\t},\r\n\t//获取所有的学校\r\n\tasync getAllSchool() {\r\n\t\tconst data = await this.$http.request({\r\n\t\t\turl: '/sysSchool/selectSchools',\r\n\t\t\tmethod: 'GET'\r\n\t\t});\r\n\t\tconst result = data.data.data;\r\n\t\tconst list = result.map(({id, name}) => {\r\n\t\t\treturn { value: id, label: name };\r\n\t\t});\r\n\t\tthis.schoolList = list;\r\n\t}\r\n}"],"sourceRoot":""}