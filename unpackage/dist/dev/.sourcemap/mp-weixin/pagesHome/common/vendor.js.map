{"version":3,"sources":["uni-app:///pagesHome/fans_focus.js","uni-app:///pagesHome/identify.js","uni-app:///pagesHome/mynews.js"],"names":["__listDataAddHandle","list","map","forEach","item","get","userId","delete","set","__fans_focus","getUsersMapData","userList","values","getUserList","options","currentPageNum","totalPage","getNew","loadStatus","$http","request","url","method","data","pageNum","pageSize","parmas","type","result","code","dataTotalNum","total","call","setTimeout","ifLoaddingShow","scrollToBottom","enterUserHome","id","$api","routerHandle","goto","changeFocusStatus","temp","$set","focusStatus","$nextTick","uni","showToast","title","icon","$forceUpdate","__identify","submit","isComplete","realName","phone","vailid","SID","schoolId","every","trim","length","studentCode","verificationCode","reLaunch","confirm","e","school","label","value","getConfirmStatus","confirmStatus","sendVerificationCode","vaildTimmer","test","setInterval","vaildTimeCount","clearTimeout","getAllSchool","name","schoolList","__mynews","getNewsMapData","newsDataList","getMynewsData","noToken","delay","enterDetail","getUserInfo","userinfo"],"mappings":"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","file":"pagesHome/common/vendor.js","sourcesContent":["const __listDataAddHandle = function(list, map) {\r\n\t// 请求新数据时清空列表\r\n\tlist.forEach(item => {\r\n\t\t// 判断数据是否存在\r\n\t\tmap.get(item.userId) ?  map.delete(item.userId) : null;\r\n\t\tmap.set(item.userId, item)\r\n\t}) \r\n}\t\r\n\r\nexport const __fans_focus = {\r\n\t// 动态数据映射\r\n\tgetUsersMapData() {\r\n\t\tif (this.userList) {\r\n\t\t\treturn [...this.userList.values()];\r\n\t\t}\r\n\t},\r\n\t// 获取用户列表\r\n\tasync getUserList(options = {}) {\r\n\t\tif ((this.currentPageNum > this.totalPage) && !options.getNew) {\r\n\t\t\tthis.loadStatus = 'nomore';\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.loadStatus = 'loading';\r\n\r\n\t\tconst data = await this.$http.request({\r\n\t\t\turl: '/umsRelation/focusAndFans',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tpageNum: this.currentPageNum,\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\tparmas: {\r\n\t\t\t\t\ttype: this.type,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tconst result = data.data.data;\r\n\t\tif (data.data.code === 200) {\r\n\t\t\tthis.currentPageNum++;\r\n\t\t\tthis.totalPage = result.totalPage;\r\n\t\t\tthis.dataTotalNum = result.total;\r\n\t\t}\r\n\t\t\r\n\t\tthis.loadStatus = 'loadmore';\r\n\t\tif (this.totalPage === 0 || options.getNew || this.dataTotalNum < 10) {\r\n\t\t\tthis.loadStatus = 'nomore';\r\n\t\t}\r\n\t\t\r\n\t\t__listDataAddHandle.call(this, result.list, this.userList);\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.ifLoaddingShow = false;\r\n\t\t}, 500)\r\n\t},\r\n\tscrollToBottom() {\r\n\t\tthis.getUserList();\r\n\t},\r\n\t// 进入用户主页\r\n\tenterUserHome(id) {\r\n\t\tthis.$api.routerHandle.goto(`/pagesHome/mynews?id=${id}`);\r\n\t},\r\n\t// 更改关注状态\r\n\tasync changeFocusStatus(userId) {\r\n\t\tconst data = await this.$http.request({\r\n\t\t\turl: '/umsRelation/focusUms',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tuserId: userId\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst result = data.data.data;\r\n\t\tconst temp = this.userList.get(userId);\r\n\t\tthis.$set(temp, 'focusStatus', !temp.focusStatus);\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: temp.focusStatus ? '关注成功' : '取关成功',\r\n\t\t\t\ticon: 'none',\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.$forceUpdate();\r\n\t}\r\n}","export const __identify = {\r\n\t// 提交\r\n\tasync submit() {\r\n\t\tlet isComplete = [this.realName, this.phone, this.vailid, this.SID, this.schoolId].every(item => {\r\n\t\t\tif (item.trim().length === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tif (isComplete) {\r\n\t\t\tconst data = await this.$http.request({\r\n\t\t\t\turl: '/umsConfirm/pushConfirm',\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\t\tschoolId: this.schoolId,\r\n\t\t\t\t\t\trealName: this.realName,\r\n\t\t\t\t\t\tstudentCode: this.SID,\r\n\t\t\t\t\t\tphone: this.phone,\r\n\t\t\t\t\t\tverificationCode: this.vailid\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (data.data.code === 200) {\r\n\t\t\t\treturn uni.reLaunch({\r\n\t\t\t\t\turl: '/pages/home/home'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn uni.showToast({\r\n\t\t\t\ttitle: '请完善所有信息',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\t// 学校更改\r\n\tconfirm(e) {\r\n\t\tthis.school = e[0].label;\r\n\t\tthis.schoolId = e[0].value;\r\n\t},\r\n\t// 获取认证状态\r\n\tasync getConfirmStatus() {\r\n\t\tconst data = await this.$http.request({\r\n\t\t\turl: '/umsAccount/getUserInfo',\r\n\t\t\tmethod: 'GET'\r\n\t\t});\r\n\t\tconst result = data.data.data;\r\n\t\tthis.confirmStatus = result.confirmStatus;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.ifLoaddingShow = false;\r\n\t\t}, 500);\r\n\t},\r\n\t// 发送验证码\r\n\tasync sendVerificationCode() {\r\n\t\tif (this.vaildTimmer) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 验证规则\r\n\t\tif (!(/^[1][3,4,5,7,8,9][0-9]{9}$/.test(this.phone))){ \r\n\t\t  return uni.showToast({\r\n\t\t  \ttitle: '请填写正确的手机号',\r\n\t\t\t\ticon: 'none'\r\n\t\t  }); \r\n\t\t} \r\n\t\t// 发送请求\r\n\t\tconst data = await this.$http.request({\r\n\t\t\turl: '/umsConfirm/sendVerificationCode',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tphone: this.phone\r\n\t\t\t}\r\n\t\t});\r\n\t\t// 请求CD\r\n\t\tthis.vaildTimmer = setInterval(() => {\r\n\t\t\tif (this.vaildTimeCount <= 1) {\r\n\t\t\t\tclearTimeout(this.vaildTimmer);\r\n\t\t\t\tthis.vaildTimmer = null;\r\n\t\t\t\tthis.vaildTimeCount = 120;\r\n\t\t\t}\r\n\t\t\tthis.vaildTimeCount--;\r\n\t\t}, 1000);\r\n\t},\r\n\t//获取所有的学校\r\n\tasync getAllSchool() {\r\n\t\tconst data = await this.$http.request({\r\n\t\t\turl: '/sysSchool/selectSchools',\r\n\t\t\tmethod: 'GET'\r\n\t\t});\r\n\t\tconst result = data.data.data;\r\n\t\tconst list = result.map(({id, name}) => {\r\n\t\t\treturn { value: id, label: name };\r\n\t\t});\r\n\t\tthis.schoolList = list;\r\n\t}\r\n}","const __listDataAddHandle = function(list, map) {\r\n\t// 请求新数据时清空列表\r\n\tlist.forEach(item => {\r\n\t\t// 判断数据是否存在\r\n\t\tmap.get(item.id) ?  map.delete(item.id) : null;\r\n\t\tmap.set(item.id, item)\r\n\t}) \r\n}\t\r\n\t\r\nexport const __mynews = {\r\n\t// 动态数据映射\r\n\tgetNewsMapData() {\r\n\t\tif (this.newsDataList) {\r\n\t\t\treturn [...this.newsDataList.values()];\r\n\t\t}\r\n\t},\r\n\t// 获取动态数据\r\n\tasync getMynewsData(options = {}) {\r\n\t\tif ((this.currentPageNum > this.totalPage) && !options.getNew) {\r\n\t\t\tthis.loadStatus = 'nomore';\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.loadStatus = 'loading';\r\n\t\tconst data = await this.$http.request({\r\n\t\t\turl: '/dynamicState/selectUmsDynamicList',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tpageNum: this.currentPageNum,\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\tparmas: {\r\n\t\t\t\t\tuserId: options.id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnoToken: options.noToken\r\n\t\t});\r\n\t\t\r\n\t\tconst result = data.data.data;\r\n\t\tif (data.data.code === 200) {\r\n\t\t\tthis.currentPageNum++;\r\n\t\t\tthis.totalPage = result.totalPage;\r\n\t\t\tthis.dataTotalNum = result.total;\r\n\t\t}\r\n\r\n\t\tthis.loadStatus = 'loadmore';\r\n\t\tif (this.totalPage === 0 || options.getNew || this.dataTotalNum < 10) {\r\n\t\t\tthis.loadStatus = 'nomore';\r\n\t\t}\r\n\t\t\r\n\t\t__listDataAddHandle.call(this, result.list, this.newsDataList);\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.ifLoaddingShow = false;\r\n\t\t}, 500)\r\n\t},\r\n\t// \r\n\tscrollToBottom() {\r\n\t\tthis.getMynewsData({ delay: 100, id: this.userId });\r\n\t},\r\n\t// \r\n\tenterDetail(id) {\r\n\t\tthis.$api.routerHandle.goto(`/pagesInteractive/newsdetail?id=${id}`);\r\n\t},\r\n\t// \r\n\tasync getUserInfo(options = {}) {\r\n\t\tconst data = await this.$http.request({\r\n\t\t\turl: '/umsAccount/selectUmsHome',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tuserId: options.id\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.userinfo = data.data.data;\r\n\t\tthis.focusStatus = this.userinfo.focusStatus;\r\n\t\t// \r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.ifLoaddingShow = false;\r\n\t\t}, 300);\r\n\t},\r\n}"],"sourceRoot":""}